<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Central & South America + Caribbean Quiz</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin=""/>
  <style>
    body { font-family: system-ui, -apple-system, 'Segoe UI', Roboto, Arial; margin:0; display:flex; height:100vh; }
    #map { flex:1; }
    #sidebar { width:360px; max-width:40%; padding:16px; box-sizing:border-box; background:#f8f9fb; border-left:1px solid #e1e4e8; overflow:auto; }
    h1{ margin:0 0 8px 0; font-size:18px }
    .target { padding:8px; margin:6px 0; background:white; border-radius:6px; border:1px solid #e6e9ee; display:flex; justify-content:space-between; align-items:center }
    .target.correct{ background:#e6ffef; border-color:#9be7c2 }
    .target.wrong{ background:#ffecec; border-color:#f1a3a3 }
    #controls { margin-top:12px }
    button{ padding:8px 10px; border-radius:6px; border:1px solid #cbd5e1; background:white; cursor:pointer }
    .small { font-size:13px; color:#555 }
    #score{ font-weight:700 }
  </style>
</head>
<body>
  <div id="map"></div>
  <div id="sidebar">
    <h1>Central & South America + Caribbean Quiz</h1>
    <div class="small">Click the map where the prompt is located. No labels are shown to challenge your geography skills.</div>
    <div style="margin-top:12px">
      <div id="prompt" style="font-size:16px; margin-bottom:8px">Press <strong>Start Quiz</strong></div>
      <div id="scoreboard" class="small">Answered: <span id="answered">0</span> / <span id="total">0</span> &nbsp; | &nbsp; Score: <span id="score">0</span></div>
    </div>
    <div id="list" style="margin-top:12px"></div>
    <div id="controls">
      <button id="start">Start Quiz</button>
      <button id="reset">Reset</button>
      <div style="margin-top:8px" class="small">Share this file by uploading the HTML to GitHub Pages or any web server.</div>
    </div>
  </div>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>
  <script>
    const TARGETS = [
      {id:'gulf_of_mexico', name:'Gulf of Mexico', lat:24.5, lon:-90.0},
      {id:'pacific_ocean', name:'Pacific Ocean', lat:10.0, lon:-100.0},
      {id:'dominican_republic', name:'Dominican Republic', lat:18.73, lon:-70.2},
      {id:'us_virgin_islands', name:'U.S. Virgin Islands', lat:18.35, lon:-64.9},
      {id:'barbados', name:'Barbados', lat:13.1939, lon:-59.5432},
      {id:'jamaica', name:'Jamaica', lat:18.1096, lon:-77.2975},
      {id:'grenada', name:'Grenada', lat:12.1165, lon:-61.6780},
      {id:'belize', name:'Belize', lat:17.1899, lon:-88.4976},
      {id:'panama', name:'Panama', lat:8.5380, lon:-80.7821},
      {id:'nicaragua', name:'Nicaragua', lat:12.1364, lon:-86.2514},
      {id:'el_salvador', name:'El Salvador', lat:13.7942, lon:-88.8965},
      {id:'ecuador', name:'Ecuador', lat:-1.8312, lon:-78.1834},
      {id:'chile', name:'Chile', lat:-35.6751, lon:-71.5430},
      {id:'uruguay', name:'Uruguay', lat:-32.5228, lon:-55.7658},
      {id:'paraguay', name:'Paraguay', lat:-23.4425, lon:-58.4438},
      {id:'venezuela', name:'Venezuela', lat:10.4806, lon:-66.9036},
      {id:'suriname', name:'Suriname', lat:3.9193, lon:-56.0278},
      {id:'bahamas', name:'Bahamas', lat:25.0343, lon:-77.3963},
      {id:'caribbean_sea', name:'Caribbean Sea', lat:15.5, lon:-72.0},
      {id:'atlantic_ocean', name:'Atlantic Ocean', lat:18.0, lon:-50.0},
      {id:'puerto_rico', name:'Puerto Rico', lat:18.2208, lon:-66.5901},
      {id:'trinidad_and_tobago', name:'Trinidad and Tobago', lat:10.6918, lon:-61.2225},
      {id:'cuba', name:'Cuba', lat:21.5218, lon:-77.7812},
      {id:'haiti', name:'Haiti', lat:18.5944, lon:-72.3074},
      {id:'mexico', name:'Mexico', lat:23.6345, lon:-102.5528},
      {id:'guatemala', name:'Guatemala', lat:15.7835, lon:-90.2308},
      {id:'costa_rica', name:'Costa Rica', lat:9.7489, lon:-83.7534},
      {id:'honduras', name:'Honduras', lat:15.2000, lon:-86.2419},
      {id:'colombia', name:'Colombia', lat:4.5709, lon:-74.2973},
      {id:'peru', name:'Peru', lat:-12.0464, lon:-77.0428},
      {id:'argentina', name:'Argentina', lat:-38.4161, lon:-63.6167},
      {id:'brazil', name:'Brazil', lat:-14.2350, lon:-51.9253},
      {id:'bolivia', name:'Bolivia', lat:-16.2902, lon:-63.5887},
      {id:'guyana', name:'Guyana', lat:4.8604, lon:-58.9302},
      {id:'french_guiana', name:'French Guiana', lat:3.9339, lon:-53.1258},
      {id:'hispaniola', name:'Hispaniola (island)', lat:19.0, lon:-72.5}
    ];
    function shuffle(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];}return a;}
    const map=L.map('map',{minZoom:2,maxZoom:8}).setView([12.0,-72.0],4);
    L.tileLayer('https://cartodb-basemaps-a.global.ssl.fastly.net/light_nolabels/{z}/{x}/{y}{r}.png',{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; CARTO', subdomains:'abcd', maxZoom:20}).addTo(map);
    const markers={};
    TARGETS.forEach(t=>{markers[t.id]=L.circleMarker([t.lat,t.lon],{radius:6,opacity:0});markers[t.id].addTo(map);});
    const listEl=document.getElementById('list');const promptEl=document.getElementById('prompt');const answeredEl=document.getElementById('answered');const totalEl=document.getElementById('total');const scoreEl=document.getElementById('score');let remaining=[];let current=null;let correctCount=0;
    function buildList(){listEl.innerHTML='';TARGETS.forEach(t=>{const d=document.createElement('div');d.className='target';d.id='list-'+t.id;d.innerHTML=`<span>${t.name}</span><span class="small" id="mark-${t.id}">?</span>`;listEl.appendChild(d);});totalEl.textContent=TARGETS.length;}
    function startQuiz(){remaining=shuffle(TARGETS.slice());correctCount=0;answeredEl.textContent=0;scoreEl.textContent=0;TARGETS.forEach(t=>{const el=document.getElementById('list-'+t.id);el.classList.remove('correct','wrong');el.querySelector('.small').textContent='?';});nextPrompt();}
    function nextPrompt(){if(remaining.length===0){promptEl.innerHTML=`Quiz complete! Final score: <strong>${correctCount}</strong> / ${TARGETS.length}`;current=null;return;}current=remaining.pop();promptEl.textContent=`Click on: ${current.name}`;}
    function toRad(deg){return deg*Math.PI/180;}function haversine(lat1,lon1,lat2,lon2){const R=6371;const dLat=toRad(lat2-lat1);const dLon=toRad(lon2-lon1);const a=Math.sin(dLat/2)**2+Math.cos(toRad(lat1))*Math.cos(toRad(lat2))*Math.sin(dLon/2)**2;return R*(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)));}
    map.on('click',function(e){if(!current)return;let best=null,bestDist=1e9;TARGETS.forEach(t=>{const d=haversine(e.latlng.lat,e.latlng.lng,t.lat,t.lon);if(d<bestDist){bestDist=d;best=t;}});const thresholdKm=150;const listItem=document.getElementById('list-'+current.id);answeredEl.textContent=parseInt(answeredEl.textContent)+1;if(best&&best.id===current.id&&bestDist<=thresholdKm){correctCount++;scoreEl.textContent=correctCount;listItem.classList.add('correct');listItem.querySelector('.small').textContent='✓';}else{listItem.classList.add('wrong');listItem.querySelector('.small').textContent='✗';}nextPrompt();});
    document.getElementById('start').addEventListener('click',startQuiz);document.getElementById('reset').addEventListener('click',()=>{buildList();promptEl.textContent='Press Start Quiz';remaining=[];current=null;answeredEl.textContent=0;scoreEl.textContent=0;});buildList();
  </script>
</body>
</html>
